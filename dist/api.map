{"version":3,"sources":["event-emiter.js","api.js"],"names":["EventEmitter","events","event","listener","push","removeListener","idx","indexOf","splice","args","forEach","apply","remove","on","AudioPlayer","parentId","childs","activeClass","loop","loopAll","emitter","audio","Audio","tracks","currentTrackIndex","i","duration","hasChild","loopAllTacks","preventDefault","audioFile","target","files","audioBlob","URL","createObjectURL","createPlayList","id","name","emit","childNodes","map","child","index","onclick","removeActiveClass","classList","add","src","play","url","createElemnt","length","addActiveClassByIndex","paused","pause","removeActiveClassByIndex","muted","volume","playall","onended","parent","text","element","document","createElement","innerHTML","appendChild"],"mappings":"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","file":"api.map","sourceRoot":"..\\src","sourcesContent":["export default class EventEmitter {\r\n\r\n  constructor() {    this.events = {};  }\r\n  \r\n  on(event, listener) {\r\n      if (typeof this.events[event] !== 'object') {\r\n          this.events[event] = [];\r\n      }\r\n      this.events[event].push(listener);\r\n      return () => this.removeListener(event, listener);\r\n  }\r\n  removeListener(event, listener) {\r\n    if (typeof this.events[event] === 'object') {\r\n        const idx = this.events[event].indexOf(listener);\r\n        if (idx > -1) {\r\n          this.events[event].splice(idx, 1);\r\n        }\r\n    }\r\n  }\r\n  emit(event, ...args) {\r\n    if (typeof this.events[event] === 'object') {\r\n      this.events[event].forEach(listener => listener.apply(this, args));\r\n    }\r\n  }\r\n  once(event, listener) {\r\n    const remove = this.on(event, (...args) => {\r\n        remove();\r\n        listener.apply(this, args);\r\n    });\r\n  }\r\n};","/* Create your own playlist from your local computer */\r\n/* API Author : Haikel Fazzani */\r\n/* Api tested on : chrome , firefox , opera , edge */\r\nimport EventEmitter from \"./event-emiter\";\r\n\r\nexport class AudioPlayer {\r\n\r\n    constructor(parentId, childs = 'li', activeClass = \"active\", loop = false, loopAll = false) {\r\n        this.emitter = new EventEmitter();\r\n        this.audio = new Audio();\r\n        this.tracks = []; // list of tracks\r\n        this.currentTrackIndex = 0;\r\n        this.i = 0; // index of each audio stored in the array : tracks\r\n        this.parentId = parentId; // example ul elements\r\n        this.childs = childs; // example li elements\r\n        this.duration = this.audio.duration;\r\n        this.hasChild = false; // parent element (ul) has childs (li)\r\n        this.activeClass = activeClass; // active track class (css)\r\n        this.loopAll = loopAll; // loop all tracks ( : boolean)\r\n        this.audio.loop = loop; // loop single track ( : boolean)\r\n        this.loopAllTacks(); // ( : method)\r\n    }\r\n\r\n    addAudio(event) {\r\n        event.preventDefault();\r\n        let audioFile = event.target.files[0], audioBlob = URL.createObjectURL(audioFile);\r\n\r\n        this.createPlayList(audioFile);\r\n        this.tracks.push({ id: this.i++, name: audioBlob });\r\n\r\n        this.emitter.emit('haschild', this.hasChild = true);\r\n        return this.tracks;\r\n    }\r\n\r\n    // on click on audio in the list , the audio play the current\r\n    playCurrentTack() {\r\n        this.emitter.on('haschild', (hasChild) => {\r\n            if (hasChild) {\r\n                [...this.parentId.childNodes].map((child, index) => {\r\n                    this.emitter.removeListener('haschild', this.hasChild);\r\n                    child.onclick = () => {\r\n                        this.removeActiveClass();\r\n                        child.classList.add(this.activeClass);\r\n                        this.currentTrackIndex = index;\r\n                        this.audio.src = this.tracks[index].name;\r\n                        this.audio.play();\r\n                    }\r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n    // create li list from tracks after converting links to urls object\r\n    createPlayList(url) {\r\n        this.createElemnt(this.parentId, this.childs, url.name);\r\n    }\r\n\r\n    /* ------- Audio Controls -------- */\r\n\r\n    playTrack() {\r\n        if (this.tracks.length > 0) {\r\n            this.removeActiveClass();\r\n            this.addActiveClassByIndex(this.currentTrackIndex);\r\n            this.audio.src = this.tracks[this.currentTrackIndex].name;\r\n            this.audio.play();\r\n        }\r\n    }\r\n\r\n    pauseTack() {\r\n        if (this.audio.paused) this.audio.play()\r\n        else this.audio.pause();\r\n    }\r\n\r\n    nextTack() {\r\n        if (this.tracks.length > 0) {\r\n            this.removeActiveClassByIndex(this.currentTrackIndex);\r\n            this.currentTrackIndex++;\r\n\r\n            this.currentTrackIndex = this.currentTrackIndex > this.tracks.length - 1 ?\r\n                0 : this.currentTrackIndex;\r\n\r\n            this.addActiveClassByIndex(this.currentTrackIndex);\r\n            this.audio.src = this.tracks[this.currentTrackIndex].name;\r\n            this.audio.play();\r\n        }\r\n    }\r\n\r\n    prevTack() {\r\n        if (this.tracks.length > 0) {\r\n            this.removeActiveClassByIndex(this.currentTrackIndex);\r\n            this.currentTrackIndex--;\r\n            this.currentTrackIndex = this.currentTrackIndex < 0 ? this.tracks.length - 1 :\r\n                this.currentTrackIndex;\r\n            this.addActiveClassByIndex(this.currentTrackIndex);\r\n            this.audio.src = this.tracks[this.currentTrackIndex].name;\r\n            this.audio.play();\r\n        }\r\n    }\r\n\r\n    muteTack() { this.audio.muted = this.audio.muted === false ? true : false; }\r\n    volUp() { return this.audio.volume = this.audio.volume < 1 ? this.audio.volume + 0.1 : 0.9; }\r\n    volDown() { return this.audio.volume = this.audio.volume > 0.1 ? this.audio.volume - 0.1 : 0.1; }\r\n\r\n    // loop single track\r\n    loopTack() {\r\n        if (this.audio.loop) this.audio.loop = false;\r\n        else this.audio.loop = true;\r\n    }\r\n\r\n    // loop all tracks list\r\n    playAll() {\r\n        this.audio.loop = false;\r\n        this.loopAll = this.loopAll ? false : true;\r\n        this.emitter.emit('playall', this.loopAll);\r\n        return this.loopAll;\r\n    }\r\n\r\n    loopAllTacks() {\r\n        this.emitter.on('playall', (playall) => {\r\n            this.audio.onended = () => {\r\n                if (playall) {\r\n                    this.removeActiveClassByIndex(this.currentTrackIndex);\r\n                    this.currentTrackIndex++;\r\n\r\n                    this.currentTrackIndex = this.currentTrackIndex > this.tracks.length - 1 ?\r\n                        0 : this.tracks.length - 1;\r\n\r\n                    this.addActiveClassByIndex(this.currentTrackIndex);\r\n                    this.audio.src = this.tracks[this.currentTrackIndex].name;\r\n                    this.audio.play();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /* __________ Methods to handle the tracks list Elements */\r\n\r\n    addActiveClassByIndex(index = 0) {\r\n        this.parentId.childNodes[index].classList.add(this.activeClass);\r\n    }\r\n\r\n    // remove class 'active' from the previous active track\r\n    removeActiveClass() {\r\n        [...this.parentId.childNodes].map(child => child.classList.remove(this.activeClass));\r\n    }\r\n\r\n    removeActiveClassByIndex(index = 0) {\r\n        this.parentId.childNodes[index].classList.remove(this.activeClass);\r\n    }\r\n\r\n\r\n    // create element dom\r\n    createElemnt(parent = \"ul\", child = \"li\", text = \"\") {\r\n        let element = document.createElement(child);\r\n        element.innerHTML = text;\r\n        parent.appendChild(element);\r\n    }\r\n}"]}