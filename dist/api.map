{"version":3,"sources":["event-emiter.js","api.js"],"names":["EventEmitter","events","event","listener","push","removeListener","idx","indexOf","splice","args","forEach","apply","remove","on","AudioPlayer","parentElmnt","childs","activeClass","loop","loopAll","emitter","audio","Audio","tracks","currentTrackIndex","i","duration","hasChild","loopAllTacks","preventDefault","audioFiles","target","files","getTracks","emit","map","some","name","createPlayList","url","URL","createObjectURL","childNodes","child","index","onclick","removeActiveClass","classList","add","playCurrentByIndex","createElemnt","parent","text","element","document","createElement","innerHTML","appendChild","length","addActiveClassByIndex","paused","play","pause","currentTime","removeActiveClassByIndex","muted","volume","playall","onended","trackIndex","src"],"mappings":"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","file":"api.map","sourceRoot":"..\\src","sourcesContent":["export default class EventEmitter {\r\n\r\n  constructor() {    this.events = {};  }\r\n  \r\n  on(event, listener) {\r\n      if (typeof this.events[event] !== 'object') {\r\n          this.events[event] = [];\r\n      }\r\n      this.events[event].push(listener);\r\n      return () => this.removeListener(event, listener);\r\n  }\r\n  removeListener(event, listener) {\r\n    if (typeof this.events[event] === 'object') {\r\n        const idx = this.events[event].indexOf(listener);\r\n        if (idx > -1) {\r\n          this.events[event].splice(idx, 1);\r\n        }\r\n    }\r\n  }\r\n  emit(event, ...args) {\r\n    if (typeof this.events[event] === 'object') {\r\n      this.events[event].forEach(listener => listener.apply(this, args));\r\n    }\r\n  }\r\n  once(event, listener) {\r\n    const remove = this.on(event, (...args) => {\r\n        remove();\r\n        listener.apply(this, args);\r\n    });\r\n  }\r\n};","/* Create your own playlist from your local computer */\r\n/* API Author : Haikel Fazzani */\r\n/* Api tested on : chrome , firefox , opera , edge */\r\nimport EventEmitter from \"./event-emiter\";\r\n\r\nexport class AudioPlayer {\r\n\r\n    constructor(parentElmnt, childs = 'li', activeClass = \"active\", loop = false, loopAll = false) {\r\n        this.emitter = new EventEmitter();\r\n        this.audio = new Audio();\r\n        this.tracks = []; // list of tracks\r\n        this.currentTrackIndex = 0;\r\n        this.i = 0; // index of each audio stored in the array : tracks\r\n        this.parentElmnt = parentElmnt; // example ul elements\r\n        this.childs = childs; // example li elements\r\n        this.duration = this.audio.duration;\r\n        this.hasChild = false; // parent element (ul) has childs (li)\r\n        this.activeClass = activeClass; // active track class (css)\r\n        this.loopAll = loopAll; // loop all tracks ( : boolean)\r\n        this.audio.loop = loop; // loop single track ( : boolean)\r\n        this.loopAllTacks(); // ( : method)\r\n    }\r\n\r\n    addTrack(event) {\r\n        event.preventDefault();       \r\n        let audioFiles = [...event.target.files];\r\n        this.getTracks(audioFiles);\r\n        this.emitter.emit('haschild', this.hasChild = true);\r\n    }\r\n\r\n    getTracks(audioFiles) {\r\n        audioFiles.map(audio => {\r\n            if(!this.tracks.some(({name}) => name === audio.name)) \r\n            {\r\n                this.createPlayList(audio);\r\n                this.tracks.push({ name: audio.name , url: URL.createObjectURL(audio) });\r\n            }\r\n        });\r\n        return this.tracks;\r\n    }\r\n\r\n    // on child element click , play track\r\n    onChildPlay() {\r\n        this.emitter.on('haschild', (hasChild) => {\r\n            if (hasChild) {\r\n                [...this.parentElmnt.childNodes].map((child, index) => {\r\n                    this.emitter.removeListener('haschild', this.hasChild);\r\n                    child.onclick = () => {\r\n                        this.removeActiveClass();\r\n                        child.classList.add(this.activeClass);\r\n                        this.currentTrackIndex = index;\r\n                        this.playCurrentByIndex(index);\r\n                    }\r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n    // create li list from tracks after converting links to urls object\r\n    createPlayList(audio) { this.createElemnt(this.parentElmnt, this.childs, audio.name); }\r\n\r\n    // create a child element and appended to the parent element passed in the constructor\r\n    createElemnt(parent = \"ul\", child = \"li\", text = \"\") {\r\n        let element = document.createElement(child);\r\n        element.innerHTML = text;\r\n        parent.appendChild(element);\r\n    }\r\n\r\n    /* ------- Audio Controls -------- */\r\n\r\n    playTrack() {\r\n        if (this.tracks.length > 0) {\r\n            this.removeActiveClass();\r\n            this.addActiveClassByIndex(this.currentTrackIndex);\r\n            this.playCurrentByIndex(this.currentTrackIndex);\r\n        }\r\n    }\r\n\r\n    pauseTack() {\r\n        if (this.audio.paused) this.audio.play()\r\n        else this.audio.pause();\r\n    }\r\n\r\n    stopTrack() {\r\n        this.audio.pause();\r\n        this.audio.currentTime = 0;\r\n    }\r\n\r\n    nextTack() {\r\n        if (this.tracks.length > 0) {            \r\n            this.removeActiveClassByIndex(this.currentTrackIndex);\r\n            this.currentTrackIndex++;\r\n\r\n            this.currentTrackIndex = this.currentTrackIndex > this.tracks.length - 1 ?\r\n                0 : this.currentTrackIndex;\r\n\r\n            this.addActiveClassByIndex(this.currentTrackIndex);\r\n            this.playCurrentByIndex(this.currentTrackIndex);\r\n        }\r\n    }\r\n\r\n    prevTack() {\r\n        if (this.tracks.length > 0) {\r\n            this.removeActiveClassByIndex(this.currentTrackIndex);\r\n            this.currentTrackIndex--;\r\n            this.currentTrackIndex = this.currentTrackIndex < 0 ? this.tracks.length - 1 :\r\n                this.currentTrackIndex;\r\n\r\n            this.addActiveClassByIndex(this.currentTrackIndex);\r\n            this.playCurrentByIndex(this.currentTrackIndex);\r\n        }\r\n    }\r\n\r\n    muteTack() { this.audio.muted = this.audio.muted === false ? true : false; }\r\n    volPlus() { return this.audio.volume = this.audio.volume < 1 ? this.audio.volume + 0.1 : 0.9; }\r\n    volMinus() { return this.audio.volume = this.audio.volume > 0.1 ? this.audio.volume - 0.1 : 0.1; }\r\n\r\n    // loop single track\r\n    loopTack() {\r\n        this.loopAll = false;\r\n        this.audio.loop = this.audio.loop ? false : true;\r\n        return this.audio.loop;\r\n    }\r\n\r\n    // loop all tracks list\r\n    playAll() {\r\n        this.audio.loop = false;\r\n        this.loopAll = this.loopAll ? false : true;\r\n        this.emitter.emit('playall', this.loopAll);\r\n        return this.loopAll;\r\n    }\r\n    \r\n    // this method listen for the event 'playall' emited by playAll() method\r\n    loopAllTacks() {\r\n        this.emitter.on('playall', (playall) => {\r\n            this.audio.onended = () => {\r\n                if (playall) {\r\n                    this.removeActiveClassByIndex(this.currentTrackIndex);\r\n                    this.currentTrackIndex++;\r\n\r\n                    if(this.currentTrackIndex === this.tracks.length) {\r\n                        this.currentTrackIndex = 0;\r\n                    }\r\n\r\n                    this.addActiveClassByIndex(this.currentTrackIndex);\r\n                    this.playCurrentByIndex(this.currentTrackIndex);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // play current track by its index passed in parameters\r\n    playCurrentByIndex(trackIndex) {        \r\n        this.audio.src = this.tracks[trackIndex].url;\r\n        this.audio.play();\r\n    }\r\n\r\n    /* add & remove a active class to the current child play (css) */\r\n    addActiveClassByIndex(index = 0) {\r\n        this.parentElmnt.childNodes[index].classList.add(this.activeClass);\r\n    }\r\n\r\n    // remove all active classes expect the current track play\r\n    removeActiveClass() {\r\n        [...this.parentElmnt.childNodes].map(child => child.classList.remove(this.activeClass));\r\n    }\r\n\r\n    removeActiveClassByIndex(index = 0) {\r\n        this.parentElmnt.childNodes[index].classList.remove(this.activeClass);\r\n    }\r\n    \r\n}"]}